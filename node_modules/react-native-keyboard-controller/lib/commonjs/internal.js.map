{"version":3,"names":["_react","require","_reactNative","_eventHandler","useEventHandlerRegistration","map","viewTagRef","onRegisterHandler","handler","viewTag","findNodeHandle","current","ids","Object","keys","handlerName","eventName","get","functionToCall","registerEventHandler","event","forEach","id","unregisterEventHandler","useAnimatedValue","initialValue","config","ref","useRef","Animated","Value"],"sources":["internal.ts"],"sourcesContent":["import { useRef } from \"react\";\nimport { Animated, findNodeHandle } from \"react-native\";\n\nimport { registerEventHandler, unregisterEventHandler } from \"./event-handler\";\n\ntype EventHandler = (event: never) => void;\ntype ComponentOrHandle = Parameters<typeof findNodeHandle>[0];\n\nexport function useEventHandlerRegistration<\n  H extends Partial<Record<string, EventHandler>>,\n>(\n  map: Map<keyof H, string>,\n  viewTagRef: React.MutableRefObject<ComponentOrHandle>,\n) {\n  const onRegisterHandler = (handler: H) => {\n    const viewTag = findNodeHandle(viewTagRef.current);\n    const ids = Object.keys(handler).map((handlerName) => {\n      const eventName = map.get(handlerName as keyof H);\n      const functionToCall = handler[handlerName as keyof H];\n\n      if (eventName && viewTag) {\n        return registerEventHandler(\n          (event: Parameters<NonNullable<H[keyof H]>>[0]) => {\n            \"worklet\";\n\n            functionToCall?.(event);\n          },\n          eventName,\n          viewTag,\n        );\n      }\n\n      return null;\n    });\n\n    return () => {\n      ids.forEach((id) => (id ? unregisterEventHandler(id) : null));\n    };\n  };\n\n  return onRegisterHandler;\n}\n\n/**\n * TS variant of `useAnimatedValue` hook which is added in RN 0.71\n * A better alternative of storing animated values in refs, since\n * it doesn't recreate a new `Animated.Value` object on every re-render\n * and therefore consumes less memory. We can not use a variant from\n * RN, since this library supports earlier versions of RN.\n *\n * @see https://github.com/facebook/react-native/commit/e22217fe8b9455e32695f88ca835e11442b0a937\n */\nexport function useAnimatedValue(\n  initialValue: number,\n  config?: Animated.AnimatedConfig,\n): Animated.Value {\n  const ref = useRef<Animated.Value | null>(null);\n\n  if (ref.current === null) {\n    ref.current = new Animated.Value(initialValue, config);\n  }\n\n  return ref.current;\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,aAAA,GAAAF,OAAA;AAKO,SAASG,2BAA2BA,CAGzCC,GAAyB,EACzBC,UAAqD,EACrD;EACA,MAAMC,iBAAiB,GAAIC,OAAU,IAAK;IACxC,MAAMC,OAAO,GAAG,IAAAC,2BAAc,EAACJ,UAAU,CAACK,OAAO,CAAC;IAClD,MAAMC,GAAG,GAAGC,MAAM,CAACC,IAAI,CAACN,OAAO,CAAC,CAACH,GAAG,CAAEU,WAAW,IAAK;MACpD,MAAMC,SAAS,GAAGX,GAAG,CAACY,GAAG,CAACF,WAAsB,CAAC;MACjD,MAAMG,cAAc,GAAGV,OAAO,CAACO,WAAW,CAAY;MAEtD,IAAIC,SAAS,IAAIP,OAAO,EAAE;QACxB,OAAO,IAAAU,kCAAoB,EACxBC,KAA6C,IAAK;UACjD,SAAS;;UAETF,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAGE,KAAK,CAAC;QACzB,CAAC,EACDJ,SAAS,EACTP,OACF,CAAC;MACH;MAEA,OAAO,IAAI;IACb,CAAC,CAAC;IAEF,OAAO,MAAM;MACXG,GAAG,CAACS,OAAO,CAAEC,EAAE,IAAMA,EAAE,GAAG,IAAAC,oCAAsB,EAACD,EAAE,CAAC,GAAG,IAAK,CAAC;IAC/D,CAAC;EACH,CAAC;EAED,OAAOf,iBAAiB;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASiB,gBAAgBA,CAC9BC,YAAoB,EACpBC,MAAgC,EAChB;EAChB,MAAMC,GAAG,GAAG,IAAAC,aAAM,EAAwB,IAAI,CAAC;EAE/C,IAAID,GAAG,CAAChB,OAAO,KAAK,IAAI,EAAE;IACxBgB,GAAG,CAAChB,OAAO,GAAG,IAAIkB,qBAAQ,CAACC,KAAK,CAACL,YAAY,EAAEC,MAAM,CAAC;EACxD;EAEA,OAAOC,GAAG,CAAChB,OAAO;AACpB","ignoreList":[]}